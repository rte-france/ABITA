<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/site/site.xhtml">
  <ui:define name="title">
    <h:outputText value="#{customProperties['page.title.prefix']}#{customProperties['tenant.creation.title']}" />
  </ui:define>
  <ui:define name="body-site">
    <h2 class="center">#{customProperties['tenant.creation.title']}</h2>
    <h:form id="frmCreateTenant" prependId="false">
      <p:fieldset legend="#{customProperties['tenant.creation.fieldset']}">
        <p class="info_required">
          Les champs suivis de <span class="mandatory">*</span> sont obligatoires.
        </p>
        <div class="ddl">
          <!-- Type d'occuapnt -->
          <h:outputLabel for="type" value="#{customProperties['tenant.field.type']}" styleClass="label">
            <span class="mandatory">*</span>
          </h:outputLabel>
          <p:selectOneMenu id="type" value="#{tenantController.tenantBean.tenantDTO.typeTenant}" converter="abita.converter.dto" styleClass="dropdownlist">
            <p:ajax event="change" update="chkSalary, chkSalaryLastYear, refField,chkManagerialLastYear, chkManagerial" listener="#{tenantController.setMandatoryFields}" oncomplete="refTenantUpdate()" />
            <f:attribute name="converter-values" value="#{tenantController.allTypeTenant}" />
            <f:selectItem itemLabel="#{msg['dropdownlist.empty']}" value="#{null}" />
            <f:selectItems value="#{tenantController.allTypeTenant}" var="type" itemLabel="#{type.label}" />
          </p:selectOneMenu>
        </div>
        <p:outputPanel id="refField" layout="block">
          <!-- Référence occupant -->
          <h:outputLabel for="ref" value="#{customProperties['tenant.field.reference']}" styleClass="label">
            <span class="mandatory">*</span>
          </h:outputLabel>
          <p:inputText id="ref" value="#{tenantController.tenantBean.tenantDTO.reference}" maxlength="8" rendered="#{!tenantController.tenantBean.tenantNotSalaried}" />
          <h:outputText id="refNotSalaried" value="#{tenantController.tenantBean.tenantDTO.reference}" rendered="#{tenantController.tenantBean.tenantNotSalaried}" />
          <h:inputHidden id="refHidden" value="#{tenantController.tenantBean.tenantDTO.reference}" rendered="#{tenantController.tenantBean.tenantNotSalaried}" />
        </p:outputPanel>
        <p>
          <!-- Nom -->
          <h:outputLabel for="name" value="#{customProperties['tenant.field.name']}" styleClass="label">
            <span class="mandatory">*</span>
          </h:outputLabel>
          <p:inputText id="name" value="#{tenantController.tenantBean.tenantDTO.lastName}" maxlength="50" onkeyup="initTenantRef()" onchange="initTenantRef()" />
        </p>
        <p>
          <!-- Prénom -->
          <h:outputLabel for="firstname" value="#{customProperties['tenant.field.firstname']}" styleClass="label">
            <span class="mandatory">*</span>
          </h:outputLabel>
          <p:inputText id="firstname" value="#{tenantController.tenantBean.tenantDTO.firstName}" maxlength="50" onkeyup="initTenantRef()" onchange="initTenantRef()" />
        </p>
        <p>
          <!-- Adresse -->
          <h:outputLabel for="adress" value="#{customProperties['tenant.field.adress']}" styleClass="label txtarea" />
          <p:inputTextarea id="adress" value="#{tenantController.tenantBean.tenantDTO.address}" rows="4" cols="74" maxlength="250" />
        </p>
        <p>
          <!-- Code postal -->
          <h:outputLabel for="cp" value="#{customProperties['tenant.field.cp']}" styleClass="label" />
          <p:inputText id="cp" value="#{tenantController.tenantBean.tenantDTO.postalCode}" maxlength="5" />
        </p>
        <p>
          <!-- Ville -->
          <h:outputLabel for="city" value="#{customProperties['tenant.field.city']}" styleClass="label" />
          <p:inputText id="city" value="#{tenantController.tenantBean.tenantDTO.city}" maxlength="50" />
        </p>
        <div class="ddl">
          <!-- Cadre -->
          <h:outputLabel for="managerial" id="chkManagerial" value="#{customProperties['tenant.field.managerial']}" styleClass="label">
            <h:outputText value=" *" styleClass="mandatory" rendered="#{tenantController.tenantBean.tenantSalaried}" />
          </h:outputLabel>
          <p:selectOneRadio id="managerial" value="#{tenantController.tenantBean.tenantDTO.managerial}" styleClass="radio" required="#{tenantController.tenantBean.tenantSalaried}" requiredMessage="#{customProperties['tenant.creation.error.managerial']}">
            <f:selectItem itemLabel="#{customProperties['confirm.yes']}" itemValue="#{true}" />
            <f:selectItem itemLabel="#{customProperties['confirm.no']}" itemValue="#{false}" />
          </p:selectOneRadio>
        </div>
        <div class="ddl">
          <!-- Cadre à octobre N-1 -->
          <h:outputLabel for="managerialLastYear" id="chkManagerialLastYear" value="#{customProperties['tenant.field.managerial.last.year']}" styleClass="label">
            <h:outputText value=" *" styleClass="mandatory" rendered="#{tenantController.tenantBean.tenantSalaried}" />
          </h:outputLabel>
          <p:selectOneRadio id="managerialLastYear" value="#{tenantController.tenantBean.tenantDTO.managerialLastYear}" styleClass="radio" required="#{tenantController.tenantBean.tenantSalaried}" requiredMessage="#{customProperties['tenant.creation.error.managerial.lastyear']}">
            <f:selectItem itemLabel="#{customProperties['confirm.yes']}" itemValue="#{true}" />
            <f:selectItem itemLabel="#{customProperties['confirm.no']}" itemValue="#{false}" />
          </p:selectOneRadio>
        </div>
        <p>
          <!-- Nombre de personne constituant le foyer -->
          <h:outputLabel for="household_number" value="#{customProperties['tenant.field.household']}" styleClass="label" />
          <p:inputText id="household_number" value="#{tenantController.tenantBean.tenantDTO.householdSize}" label="#{customProperties['tenant.field.household']}" maxlength="3" />
        </p>
        <p>
          <!-- Nombre de personne constituant le foyer à octobre N-1 -->
          <h:outputLabel for="householdLastYear_number" value="#{customProperties['tenant.field.household.last.year']}" styleClass="label" />
          <p:inputText id="householdLastYear_number" value="#{tenantController.tenantBean.tenantDTO.householdSizeLastYear}" label="#{customProperties['tenant.field.household.last.year']}" maxlength="3" />
        </p>
        <p>
          <!-- Salaire brut -->
          <h:outputLabel for="salary_number" id="chkSalary" value="#{customProperties['tenant.field.salary']}" styleClass="label">
            <h:outputText value=" *" styleClass="mandatory" rendered="#{tenantController.tenantBean.tenantSalaried}" />
          </h:outputLabel>
          <p:inputText id="salary_number" value="#{tenantController.tenantBean.tenantDTO.actualSalaryAsString}" label="#{customProperties['tenant.field.salary']}" maxlength="10" required="#{tenantController.tenantBean.tenantSalaried}" requiredMessage="#{customProperties['tenant.creation.error.salary']}" />
        </p>
        <p>
          <!-- Salaire brut à octobre N-1 -->
          <h:outputLabel for="salaryLastYear_number" id="chkSalaryLastYear" value="#{customProperties['tenant.field.salary.last.year']}" styleClass="label">
            <h:outputText value=" *" styleClass="mandatory" rendered="#{tenantController.tenantBean.tenantSalaried}" />
          </h:outputLabel>
          <p:inputText id="salaryLastYear_number" value="#{tenantController.tenantBean.tenantDTO.referenceGrossSalaryAsString}" label="#{customProperties['tenant.field.salary.last.year']}" maxlength="10" required="#{tenantController.tenantBean.tenantSalaried}" requiredMessage="#{customProperties['tenant.creation.error.salary.lastyear']}" />
        </p>
        <p>
          <!-- Téléphone -->
          <h:outputLabel for="phone" value="#{customProperties['tenant.field.phone']}" styleClass="label" />
          <p:inputText id="phone" value="#{tenantController.tenantBean.tenantDTO.phone}" maxlength="20" />
        </p>
        <p>
          <!-- Email -->
          <h:outputLabel for="email" value="#{customProperties['tenant.field.email']}" styleClass="label" />
          <p:inputText id="email" value="#{tenantController.tenantBean.tenantDTO.mailAddress}" maxlength="255" />
        </p>
      </p:fieldset>
      <h:inputHidden id="checkId" value=" " />
      <p:outputPanel layout="block" styleClass="action">
        <p:commandButton id="btnValidate" value="#{customProperties['tenant.action.save']}" validateClient="true" action="#{tenantController.saveOrUpdateData}" update=":messages @form" />
        <p:commandButton id="btnCancel" value="#{customProperties['tenant.action.cancel']}" action="#{tenantController.cancel}" immediate="true" />
      </p:outputPanel>
    </h:form>
  </ui:define>
</ui:composition>
</html>
