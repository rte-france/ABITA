<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/site/site.xhtml">
  <ui:define name="title">
    <h:outputText value="#{customProperties['page.title.prefix']}#{customProperties['administration.interface.gcpdownloading.title']}" />
  </ui:define>
  <ui:define name="body-site">
    <h2 class="center">#{customProperties['administration.interface.gcpdownloading.title']}</h2>
    <h:form id="frmInterfaceGCPDownloading" prependId="false">
      <p:fieldset legend="#{customProperties['administration.interface.gcpdownloading.fieldset.period']}">
        <!-- Liste sélection mois -->
        <p:selectOneMenu id="month" value="#{interfaceGCPDownloadingController.interfaceGCPDownloadingBean.month}" required="true" requiredMessage="#{customProperties['administration.interface.gcpdownloading.error.mandatory.month']}">
          <f:selectItems value="#{interfaceGCPDownloadingController.lstMonths}" var="month" itemValue="#{month.value}" itemLabel="#{month.label}" />
        </p:selectOneMenu>
        <p:inputText id="year" value="#{interfaceGCPDownloadingController.interfaceGCPDownloadingBean.year}" size="4" maxlength="4" label="#{customProperties['administration.interface.gcp.year']}" required="true" requiredMessage="#{customProperties['administration.interface.gcpdownloading.error.mandatory.year']}" />
        <p:commandButton id="btnSearch" value="#{customProperties['administration.interface.gcpdownloading.action.search']}" actionListener="#{interfaceGCPDownloadingController.search}" update=":messages @parent result" />
      </p:fieldset>
      <p:outputPanel id="result" layout="block">
        <p:dataTable value="#{interfaceGCPDownloadingController.interfaceGCPDownloadingBean.lstGCPFile}" var="gcpFile" emptyMessage="#{customProperties['no.data']}" sortBy="#{gcpFile.name}" sortOrder="descending" rendered="#{interfaceGCPDownloadingController.interfaceGCPDownloadingBean.lstGCPFile != null}">
          <f:facet name="header">
            <h:outputText value="#{customProperties['administration.interface.gcpdownloading.datatable.title']}" />
          </f:facet>
          <!-- Type de fichier -->
          <p:column headerText="#{customProperties['administration.interface.gcpdownloading.type']}">
            <h:outputText value="#{gcpFile.type}" />
          </p:column>
          <!-- Nom du fichier -->
          <p:column headerText="#{customProperties['administration.interface.gcpdownloading.name']}">
            <h:outputText value="#{gcpFile.name}" />
          </p:column>
          <!-- Date de modification du fichier -->
          <p:column headerText="#{customProperties['administration.interface.gcpdownloading.date']}">
            <h:outputText value="#{gcpFile.lastUpdate}">
              <f:convertDateTime pattern="#{customProperties['pattern.date']}" />
            </h:outputText>
          </p:column>
          <!-- Taille du fichier -->
          <p:column headerText="#{customProperties['administration.interface.gcpdownloading.size']}">
            <h:outputText value="#{gcpFile.size}" />
          </p:column>
          <!-- Lien de téléchargement -->
          <p:column headerText="#{customProperties['administration.interface.gcpdownloading.download']}">
            <p:commandButton ajax="false" icon="ddl">
              <p:fileDownload value="#{gcpFile.file}" />
            </p:commandButton>
          </p:column>
        </p:dataTable>
      </p:outputPanel>
    </h:form>
  </ui:define>
</ui:composition>
</html>